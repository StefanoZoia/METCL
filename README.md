# METCL

### Description

This repository contains the data and the code described in the paper ["The Delta of Thought: Channeling Rivers of Commonsense Knowledge in the Sea of Metaphorical Interpretations"](https://github.com/StefanoZoia/METCL/blob/main/IJCAI__25_Lieto_Pozzato_Zoia.pdf) by Antonio Lieto, Gian Luca Pozzato and Stefano Zoia, to appear in Proceedings of the 34th International Joint Conference on Artificial Intelligence (IJCAI 2025), Special Track on: Human-Centred Artificial Intelligence: Multidisciplinary Contours and Challenges of Next-Generation AI Research and Applications., 16-22 August, Montreal, Canada.

METCL is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. The software is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details. See http://www.gnu.org/licenses/.

### Directory structure

Once dowloaded the repositoty, you will find two main folders called: "METCL for generation" and "Results of the automatic evaluation"

In the folder "METCL for generation", you can download and run the 2 versions of the METCL system used for the generation of metaphorical concepts by using the TCL reasoning framework by Lieto and Pozzato: https://www.tandfonline.com/doi/abs/10.1080/0952813X.2019.1672799. In both versions (described below), there are three modules: Dataset building, Prototype generation and Concept combination that need to be executed to run the system. Each version is provided with a dedicated README file that describes in detail how to run each step of the pipeline.

- The first version is "METCL applied to MetaNet conceptual metaphors". This version uses exclusively the MetaNet ontology to extract from a sentence the source and target concepts to be combined by METCL. In this case, if the combination is possible (i.e. source and target are identified, see the section "Dataset Building" in the paper) the result is a TCL representation synthetizing and abstracting a MetaNet conceptual metaphor (i.e., a class of the MetaNet ontology). The MetaNet ontology used can be found in the subfolder "01_dataset building/data".

- The second version is "METCL applied to generic metaphorical expressions". Differently from the first version, here any sentence can lead to the generation of a TCL metaphorical representation, provided that it is explicitly annotated with source and target.
    - In the folder, you find the application of this version to both the NN450 dataset and to the metaphorical sentences from MetaNet, but any sentence can be used if annotated, as indicated above.

- the final subfolder of "METCL for generation" contains the Results of the human evaluation, along with all the data collected.

In the second main folder of the repository "Results of the automatic evaluation", you find the scripts and the results used for evaluating, in few shot and zero shot settings, the capability of metaphor classification of different LLMs. The scripts allow to run the classification of metaphorical sentences on MetaNet's taxonomy, presented in two versions: the original one and one extended with the metaphorical classes generated by METCL (the information for the generation with METCL is indicated in the previous paragraph of this file) (see Table 1 from the paper). A more detailed description of how the data is organized is provided in a dedicated README file.


### Install requirements to run METCL

1. Create a python venv with `python -m venv .venv`
2. If the venv is not already active, activate it with `.venv/Scripts/activate`
3. Install the required dependencies with `pip install -r requirements.txt`
4. Running the conceptual combination module requires Java to be installed on your computer. If you get an "Unexpected error during reasoning", please check your Java installation.

### Contacts

For any inquiry about METCL, you can send an email to: {alieto@unisa.it; gianluca.pozzato@unito.it; stefano.zoia@unito.it}.
